Table users {
  id int [pk, increment]
  name varchar
  email varchar
  encrypted_password varchar
  created_at datetime
  updated_at datetime
}

Table categories {
  id int [pk, increment]
  name varchar
  created_at datetime
  updated_at datetime
}

Table products {
  id int [pk, increment]
  user_id int [ref: > users.id]          // seller
  category_id int [ref: > categories.id]
  title varchar
  description text
  price int                               // yen
  status varchar                          // e.g. draft, published, sold
  created_at datetime
  updated_at datetime
}

Table favorites {
  id int [pk, increment]
  user_id int [ref: > users.id]
  product_id int [ref: > products.id]
  created_at datetime
  updated_at datetime
}

Table cart_items {
  id int [pk, increment]
  user_id int [ref: > users.id]          // DB cart for logged-in users
  product_id int [ref: > products.id]
  quantity int
  created_at datetime
  updated_at datetime
}

Table orders {
  id int [pk, increment]
  user_id int [ref: > users.id]

  // shipping info (inline, like your controller params)
  shipping_address1 varchar
  shipping_address2 varchar
  postal_code varchar
  prefecture varchar
  city varchar

  // money (yen)
  subtotal_yen int
  shipping_yen int
  total_yen int

  status varchar                          // e.g. pending, paid, shipped
  created_at datetime
  updated_at datetime
}

Table order_items {
  id int [pk, increment]
  order_id int [ref: > orders.id]
  product_id int [ref: > products.id]
  price_yen int                           // snapshot of price at purchase
  quantity int
  created_at datetime
  updated_at datetime
}

Table conversations {
  id int [pk, increment]
  product_id int [ref: > products.id]
  created_at datetime
  updated_at datetime
}

Table conversation_participants {
  id int [pk, increment]
  conversation_id int [ref: > conversations.id]
  user_id int [ref: > users.id]
  created_at datetime
  updated_at datetime
}

Table messages {
  id int [pk, increment]
  conversation_id int [ref: > conversations.id]
  user_id int [ref: > users.id]          // sender
  body text
  read_at datetime
  created_at datetime
  updated_at datetime
}
